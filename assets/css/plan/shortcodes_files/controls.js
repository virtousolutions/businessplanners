
function selectUnderlyingRadio(selected){var underlying=$j(selected).closest('.radioListContainer').find('.hiddenSelect');selected=$j(selected).is('input')?selected:$j(selected).find('input');var select=underlying.find("input.[type=radio]").each(function(){this.checked=$j(this).attr("value")===selected.getAttribute("value");});}
function selectUnderlyingDropDown(selected){var underlying=$j(selected).parent().parent().parent().parent().find('.hiddenSelect');var newSelectedRadio=null;var select=underlying.find("input.[type=radio]").each(function(){var checked=$j(this).attr("value")===selected.getAttribute("value");if(checked!==this.checked){this.checked=checked;if(checked){newSelectedRadio=this;}}});if(newSelectedRadio!==null){$j(newSelectedRadio).change();}}
function buildVisualDropDown(hiddenTable){var dropDownParent=$j(hiddenTable).parents(".drop-down");dropDownParent.prepend($j(document.createElement("ul")));var ul=dropDownParent.find("ul");$j(hiddenTable).find('input.[type=radio]').each(function(){var label=$j(this).parent().find("label").text();var li=$j(document.createElement("li"));li.addClass("selectableItem");if(this.checked){li.addClass("disabled");dropDownParent.prev().find(".selectedItem").text(label);}
li.click(function(){selectUnderlyingDropDown(this);});li.get(0).setAttribute("value",this.value);li.append("<a href='javascript:void(0);'><span class=''>"+label+"</span></a>");ul.append(li);});}
Ext.ux.Overlay=Ext.extend(Ext.Window,{modal:true,fixed:true,draggable:false,shadow:false,frame:true,constrainHeader:true,header:true,headerAsText:true,footer:true,defaults:{},constructor:function(cfg){this.addEvents('aftershow');if(cfg.dialog){cfg.cls=cfg.cls?cfg.cls+' dialog':'dialog';cfg.width=cfg.width||480;cfg.height=cfg.height||"auto";}
cfg=Ext.applyIf(cfg,{baseCls:'overlay',resizable:false,width:960,height:614,headerCssClass:'header',bodyCssClass:'body',footerCssClass:'footer',footerStyle:'height: 36px;',zIndex:15000});if(Ext.isNumber(cfg.width)){cfg.width+=4;}
if(Ext.isNumber(cfg.height)){cfg.height+=4;}
Ext.ux.Overlay.superclass.constructor.call(this,cfg);if(this.fixed){this.on('show',function(cmp){cmp.center();},this);}},initComponent:function(){Ext.ux.Overlay.superclass.initComponent.call(this);this.on('beforedestroy',function(cmp){if(cmp.isVisible()){cmp.hide(true,function(){cmp.destroy();},this);return false;}},this);},center:function(){Ext.ux.Overlay.superclass.center.call(this);this.syncSize();if(this.proxy){this.proxy.setBox(this.el.getBox());}},show:function(animateTarget,cb,scope){if(!this.rendered){this.render(Ext.getBody());}
if(this.hidden===false){this.toFront();return this;}
if(this.fireEvent('beforeshow',this)===false){return this;}
if(cb){this.on('show',cb,scope,{single:true});}
this.hidden=false;this.beforeShow();var b=this.getBox();var bs=this.getBox();bs.x=bs.x+50;bs.y=bs.y+50;bs.width=bs.width-100;bs.height=bs.height-100;this.proxy.show();this.proxy.setBox(bs);this.proxy.setOpacity(0.1);this.proxy.shift(Ext.apply(b,{callback:function(){this.el.setStyle('display','block');this.el.show().setOpacity(1);this.proxy.setBox(this.el.getBox());this.proxy.fadeOut({duration:0.15,callback:this.afterShow.createDelegate(this,[true],false)});},scope:this,easing:'easeOut',duration:0.25,opacity:1}));return this;},hide:function(animateTarget,cb,scope){if(this.hidden||this.fireEvent('beforehide',this)===false){return this;}
if(cb){this.on('hide',cb,scope,{single:true});}
this.hidden=true;if(animateTarget!==false){var b=this.el.getBox();b.y=b.y+75;if(this.el.shadow){this.el.shadow.hide();}
this.el.shift(Ext.apply(b,{opacity:0,duration:0.4,easing:'easeIn',callback:function(){this.el.hide();if(this.modal){this.mask.fadeOut({duration:0.1,callback:function(){Ext.getBody().removeClass('x-body-masked');}});}
this.afterHide();},scope:this}));}else{this.el.hide();this.mask.hide();Ext.getBody().removeClass('x-body-masked');this.afterHide();}
return this;},afterShow:function(){Ext.ux.Overlay.superclass.afterShow.apply(this,arguments);this.fireEvent('aftershow',this);},toolTemplate:new Ext.Template('<a href="" class="{id}">&#160;</a>')});Ext.EventManager.onWindowResize(function(){Ext.WindowMgr.each(function(w){if(w.fixed){w.center();}});});Ext.ux.prompt=function(title,msg,fn,scope,value,v){var handler,textbox,dlg;fn=fn||Ext.emptyFn;value=v||value;textbox=new Ext.form.TextField({value:value||''});handler=function(btn){fn.apply(scope,[btn.value,textbox.getValue()]);dlg.destroy();};dlg=new Ext.ux.Overlay({dialog:true,title:title||'&nbsp;',items:[{border:false,html:{tag:'p',html:Ext.util.Format.stripTags(msg)}},textbox],buttons:[{xtype:'aquabutton',text:'OK',value:'ok',handler:handler},{xtype:'aquabutton',text:'Cancel',value:'cancel',handler:handler}]});dlg.show();textbox.render(dlg.body);textbox.setWidth(dlg.body.getWidth());textbox.on('specialkey',function(cmp,e){switch(e.getKey()){case e.ENTER:handler({value:'ok'});break;case e.ESC:handler({value:'cancel'});break;}});};Ext.ux.AquaButton=Ext.extend(Ext.BoxComponent,{hidden:false,disabled:false,loading:false,pressed:false,initComponent:function(){Ext.ux.AquaButton.superclass.initComponent.call(this);this.addEvents('click','mouseover','mouseout','disable','enable');},onRender:function(ct,position){var btn,targs=this.getTemplateArgs();if(position){btn=this.template.insertBefore(position,targs,true);}else{btn=this.template.append(ct,targs,true);}
this.initButtonEl(btn,this.btnEl);},initButtonEl:function(btn,btnEl){this.el=btn;if(Ext.isDefined(this.tabIndex)){btnEl.dom.tabIndex=this.tabIndex;}
if(this.tooltip){this.setTooltip(this.tooltip,true);}
this.setLoading(this.loading);this.setDisabled(this.disabled);this.btnEl=btn;this.mon(btn,'click',this.onClick,this);this.btnEl.unselectable();},setText:function(text){this.btnEl.child('.button-cap span').update(text);},setIcon:function(icon){},setIconCls:function(iconCls){if(this.rendered){if(iconCls){this.getEl().addClass('icon').replaceClass(this.iconCls,iconCls);this.iconCls=iconCls;}else{this.getEl().removeClass(['icon',this.iconCls]);}}},onClick:function(e){if(e){e.preventDefault();}
if(!this.disabled){this.fireEvent('click',this,e);if(this.handler){this.handler.call(this.scope||this,this,e);}}},disable:function(){this.setDisabled(true);},enable:function(){this.setDisabled(false);},setDisabled:function(disabled){if(disabled){this.addClass('disabled');this.disabled=true;this.fireEvent('disable',this);}else{this.removeClass('disabled');this.disabled=false;this.fireEvent('enable',this);}},startLoading:function(){this.setLoading(true);},stopLoading:function(){this.setLoading(false);},setLoading:function(loading){this.loading=loading;this.setDisabled(loading);if(loading){if(this.btnEl){this.btnEl.addClass('icon-loading');}}else{if(this.btnEl){this.btnEl.removeClass('icon-loading');}}},focus:function(){this.btnEl.focus();},blur:function(){this.btnEl.blur();},afterRender:function(){Ext.ux.AquaButton.superclass.afterRender.call(this);if(this.color!=='text'){this.doAutoWidth();}},doAutoWidth:function(){if(this.autoWidth!==false&&this.el&&this.text&&this.width===undefined){this.el.setWidth('auto');if(Ext.isIE7&&Ext.isStrict){var ib=this.btnEl;if(ib&&ib.getWidth()>20){ib.clip();ib.setWidth(Ext.util.TextMetrics.measure(ib,this.text).width+ib.getFrameWidth('lr')+24);}}
if(this.minWidth){if(this.el.getWidth()<this.minWidth){this.el.setWidth(this.minWidth);}}}},getTemplateArgs:function(){var templateArgs,classes=[];if(this.small){this.size='small';}
if(this.large){this.size='large';}
if(this.color!=='text'){classes.push('button');}
classes.push("button-"+(this.color||'gray')+(this.size?'-'+this.size:''));if(this.cls){classes.push(this.cls);}
if(this.dir){classes.push(this.dir);}
if(this.iconCls){classes.push('icon',this.iconCls);}
templateArgs={cls:classes.join(' '),style:this.style||'',href:this.href||'#',text:this.text};return templateArgs;},template:new Ext.Template('<a class="{cls}" {style} href="{href}"><span class="button-cap"><span style="margin: 0pt auto;">{text}</span></span></a>'),buttonSelector:'a'});Ext.reg('aquabutton',Ext.ux.AquaButton);